<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Webaudio Databending</title>
    <link rel="stylesheet" href="styles.css" />
    <link rel="icon" type="image/png" />
    <script>
      const canvas = document.createElement('canvas');
      canvas.width = 16;
      canvas.height = 16;
      const context = canvas.getContext('2d');
      context.fillStyle = 'pink';

      context.fillRect(0, 0, 16, 16);

      const favicon = canvas.toDataURL('image/png');

      document.querySelector('link[rel="icon"]').setAttribute('href', favicon);

    </script>
  </head>
  <body>
    <synth-brain>
      <main>
      <section id="granulation">
        <h4>Granulation</h4>
        <div class="synth-controls">
        <synth-dial
          name="grainDuration"
          min="1"
          max="1000"
          label="Duration"
        ></synth-dial>
        <synth-dial
          name="density"
          min="1"
          max="128"
          label="Density"
        ></synth-dial>
        <synth-dial
          name="window"
          min="1"
          max="10"
          label="Window"
          step="0.1"
        ></synth-dial>
        <synth-dial
          name="spray"
          min="1"
          max="128"
          label="Spray"
          step="1"
        ></synth-dial>
        <synth-dial
          name="random"
          min="0"
          max="1"
          step="0.25"
          label="Random"
          format="percent"
        ></synth-dial>
        </div>
      </section>
      <synth-display></synth-display>
      <synth-waveform></synth-waveform>
      <section id="effects">
        <h4>Effects</h4>
        <div class="synth-effect">
          <synth-switch name="effects.delay.active" label="Delay"></synth-switch>
          <div class="synth-controls">
            <synth-dial
              min="0"
              max="1"
              step="0.01"
              name="effects.delay.feedback"
              label="Feedback"
            ></synth-dial>
            <synth-dial
              min="0"
              max="1"
              step="0.01"
              name="effects.delay.time"
              label="Time"
            ></synth-dial>
            <synth-dial
              min="0"
              max="1"
              step="0.01"
              name="effects.delay.mix"
              label="Mix"
            ></synth-dial>
          </div>
        </div>
        <div class="synth-effect">
          <synth-switch name="effects.lowPassFilter.active" label="Low Pass"></synth-switch>
          <div class="synth-controls">
            <synth-dial
              min="20"
              max="20000"
              step="1"
              name="effects.lowPassFilter.frequency"
              label="Frequency"
            ></synth-dial>
            <synth-dial
              min="0"
              max="10"
              step="0.1"
              name="effects.lowPassFilter.peak"
              label="Peak"
            ></synth-dial>
            <synth-dial
              min="0"
              max="1"
              step="0.01"
              name="effects.lowPassFilter.mix"
              label="Mix"
            ></synth-dial>
          </div>
        </div>
        <div class="synth-effect">
          <synth-switch name="effects.detune.active" label="Detune"></synth-switch>
          <div class="synth-controls">
            <synth-dial
              min="-1200"
              max="1200"
              step="1"
              name="effects.detune.value"
              label="Value"
            ></synth-dial>
            <synth-dial
              min="0"
              max="1"
              step="0.01"
              name="effects.detune.areaOfEffect"
              label="Area"
            ></synth-dial>
            <synth-dial
              min="2"
              max="64"
              step="1"
              name="effects.detune.randomValues"
              label="Random Points"
            ></synth-dial>
            <synth-switch
              name="effects.detune.randomize"
              label="Randomize"
            ></synth-switch>
            <synth-switch
              name="effects.detune.enablePartial"
              label="Partial"
            ></synth-switch>
          </div>
        </div>
        <div class="synth-effect">
          <synth-switch name="effects.biquadFilter.active" label="Biquad Filter"></synth-switch>
          <div class="synth-controls">
            <synth-select
              name="effects.biquadFilter.type"
              label="Type"
              options='[{"value": "lowpass", "label": "Lowpass"}, {"value": "highpass", "label": "Highpass"}, {"value": "bandpass", "label": "Bandpass"}]'
            ></synth-select>
            <synth-dial
              min="20"
              max="22050"
              step="1"
              name="effects.biquadFilter.biquadFrequency"
              label="Frequency"
            ></synth-dial>
            <synth-dial
              min="0"
              max="20"
              step="0.1"
              name="effects.biquadFilter.quality"
              label="Quality"
            ></synth-dial>
            <synth-dial
              min="-1200"
              max="1200"
              step="1"
              name="effects.biquadFilter.detune"
              label="Detune"
            ></synth-dial>
            <synth-dial
              min="2"
              max="64"
              step="1"
              name="effects.biquadFilter.randomValues"
              label="Random Points"
            ></synth-dial>
            <synth-switch
              name="effects.biquadFilter.randomize"
              label="Randomize"
            ></synth-switch>
            <synth-switch
              name="effects.biquadFilter.enablePartial"
              label="Partial"
            ></synth-switch>
            <synth-dial
              min="0"
              max="1"
              step="0.01"
              name="effects.biquadFilter.areaOfEffect"
              label="Area"
            ></synth-dial>
          </div>
        </div>
      </section>
    <section id="bottom">
      <div>
        <play-button></play-button>
        <synth-ribbon></synth-ribbon>
      </div>
    </section>
      </main>
    </synth-brain>

    <script type="importmap">
      {
        "imports": {
          "databender": "/node_modules/databender/index.js",
          "pizzicato": "./helpers/pizzicato.js",
          "helpers/": "./helpers/"
        }
      }
    </script>
    <script type="module">
      import { App } from "./App.js";

      App();
    </script>
  </body>
</html>
