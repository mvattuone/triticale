<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Webaudio Databending</title>
    <link rel="stylesheet" href="styles.css" />
    <link rel="icon" type="image/png" />
    <script>
      const canvas = document.createElement('canvas');
      canvas.width = 16;
      canvas.height = 16;
      const context = canvas.getContext('2d');
      context.fillStyle = 'pink';

      context.fillRect(0, 0, 16, 16);

      const favicon = canvas.toDataURL('image/png');

      document.querySelector('link[rel="icon"]').setAttribute('href', favicon);

    </script>
  </head>
  <body>
    <header>Triticale</header>
    <synth-brain>
      <main>
      <section id="granulation">
        <h4>Granulation</h4>
        <div>
        <synth-dial
          name="grainDuration"
          min="1"
          max="1000"
          label="Grain Duration"
        ></synth-dial>
        <synth-dial
          name="density"
          min="1"
          max="128"
          label="Density"
        ></synth-dial>
        <synth-dial
          name="window"
          min="1"
          max="10"
          label="Window"
          step="0.1"
        ></synth-dial>
        <synth-dial
          name="spray"
          min="1"
          max="128"
          label="Spray"
          step="1"
        ></synth-dial>
        <synth-dial
          name="random"
          min="0"
          max="1"
          step="0.25"
          label="Random"
          format="percent"
        ></synth-dial>
        </div>
      </section>
      <section id="visuals">
        <synth-display></synth-display>
        <synth-waveform></synth-waveform>
      </section>
      <section id="effects">
        <div>
        <synth-switch name="effects.bitcrusher.active" label="Bitcrusher"></synth-switch>
        <synth-dial
          min="0"
          max="16"
          step="4"
          name="effects.bitcrusher.bits"
          label="Bits"
        ></synth-dial>
        <synth-dial
          min="0.0001"
          max="1"
          step="0.001"
          name="effects.bitcrusher.normfreq"
          label="Norm Freq"
        ></synth-dial>
        </div>
        <div>
        <synth-switch name="effects.convolver.active" label="Reverb"></synth-switch>
        <synth-dial
          min="0"
          max="1"
          step="0.01"
          name="effects.convolver.level"
          label="Level"
        ></synth-dial>
        <!-- <synth-select -->
        <!--   name="effects.convolver.impulse" -->
        <!--   label="Type" -->
        <!--   options=" -->
        <!-- ></synth-select> -->
      </div>
      <div>
        <synth-switch name="effects.biquad.active" label="Biquad"></synth-switch>
        <synth-dial
          min="0"
          max="1"
          step="0.01"
          name="effects.biquad.areaOfEffect"
          label="Area Of Effect"
        ></synth-dial>
        <synth-dial
          name="effects.biquad.detune"
          label="Detune"
        ></synth-dial>
        <synth-dial
          name="effects.biquad.quality"
          label="Quality"
        ></synth-dial>
        <synth-dial
          name="effects.biquad.randomValues"
          label="Random Values"
        ></synth-dial>
        <synth-select
          name="effects.biquad.type"
          label="Type"
          options='[{"value": "lowpass", "label": "Lowpass"}, {"value": "highpass", "label": "Highpass"}, {"value": "bandpass", "label": "Bandpass"}]'
        ></synth-select>
        <synth-dial min="20" max="44000" label="Frequency" name="effects.biquad.biquadFrequency"
></synth-dial>
        <synth-switch
          name="effects.biquad.randomize"
          label="Randomize"
        ></synth-switch>
        <synth-switch
          name="effects.biquad.enablePartial"
          label="Enable Partial"
        ></synth-switch>
      </div>
    </section>
    <section id="bottom">
      <div>
        <play-button></play-button>
        <synth-ribbon></synth-ribbon>
      </div>
    </section>
      </main>
    </synth-brain>
    <footer></footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/tunajs/1.0.4/tuna-min.js"></script>
    <script type="importmap">
      {
        "imports": {
          "databender": "/node_modules/databender/index.js",
          "helpers/": "./helpers/"
        }
      }
    </script>
    <script type="module">
      import { App } from "./App.js";

      App();
    </script>
  </body>
</html>
