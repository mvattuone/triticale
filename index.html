<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Webaudio Databending</title>
    <link rel="stylesheet" href="styles.css" />
    <link rel="icon" type="image/png" />
    <script>
      const canvas = document.createElement('canvas');
      canvas.width = 16;
      canvas.height = 16;
      const context = canvas.getContext('2d');
      context.fillStyle = 'pink';

      context.fillRect(0, 0, 16, 16);

      const favicon = canvas.toDataURL('image/png');

      document.querySelector('link[rel="icon"]').setAttribute('href', favicon);

    </script>
  </head>
  <body>
    <header>Triticale</header>
    <synth-brain>
      <main>
        <section>
          <div>
          <dnd-wrapper>
            <synth-display></synth-display>
          </dnd-wrapper>
          </div>
          <div>
          <dnd-wrapper>
            <synth-waveform></synth-waveform>
          </dnd-wrapper>
          </div>
        </section>
        <section>
          <synth-slider
            name="grainIndex"
            min="1"
            max="100"
            label="Position"
          ></synth-slider>
          <synth-slider
            name="grainDuration"
            min="1"
            max="1000"
            label="Grain Duration"
          ></synth-slider>
          <synth-slider
            name="density"
            min="1"
            max="128"
            label="Density"
          ></synth-slider>
          <synth-slider
            name="window"
            min="1"
            max="10"
            label="Window"
            step="0.1"
          ></synth-slider>
          <synth-slider
            name="spray"
            min="1"
            max="128"
            label="Spray"
            step="1"
          ></synth-slider>
          <synth-slider
            name="random"
            min="0"
            max="1"
            label="Random"
            step="0.01"
          ></synth-slider>
        </section>
        <section>
          <h4>Bitcrusher</h4>
          <synth-toggle name="effects.bitcrusher.active"></synth-toggle>
          <synth-slider
            min="0"
            max="16"
            step="4"
            name="effects.bitcrusher.bits"
            label="Bits"
          ></synth-slider>
          <synth-slider
            min="0.0001"
            max="1"
            step="0.001"
            name="effects.bitcrusher.normfreq"
            label="Norm Freq"
          ></synth-slider>
        </section>
        <section>
          <h4>Reverb</h4>
          <synth-toggle name="effects.convolver.active"></synth-toggle>
          <synth-slider
            min="0"
            max="1"
            step="0.01"
            name="effects.convolver.level"
            label="Level"
          ></synth-slider>
          <!-- <synth-select -->
          <!--   name="effects.convolver.impulse" -->
          <!--   label="Type" -->
          <!--   options=" -->
          <!-- ></synth-select> -->
        </section>
        <section>
          <h4>Biquad</h4>
          <synth-toggle name="effects.biquad.active"></synth-toggle>
          <synth-slider
            min="0"
            max="1"
            step="0.01"
            name="effects.biquad.areaOfEffect"
            label="Area Of Effect"
          ></synth-slider>
          <synth-slider
            name="effects.biquad.detune"
            label="Detune"
          ></synth-slider>
          <synth-quslider
            name="effects.biquad.quality"
            label="Quality"
          ></synth-quslider>
          <synth-slider
            name="effects.biquad.randomValues"
            label="Random Values"
          ></synth-slider>
          <synth-select
            name="effects.biquad.type"
            label="Type"
            options='[{"value": "lowpass", "label": "Lowpass"}, {"value": "highpass", "label": "Highpass"}, {"value": "bandpass", "label": "Bandpass"}]'
          ></synth-select>
          <synth-slider min="20" max="44000" label="Frequency" name="effects.biquad.biquadFrequency"
></synth-slider>
          <div>
            <label>Randomize</label>
            <synth-toggle name="effects.biquad.randomize"></synth-toggle>
          </div>
          <div>
            <label>Enable Partial</label>
            <synth-toggle name="effects.biquad.enablePartial"></synth-toggle>
          </div>
        </section>
        <play-button></play-button>
      </main>
    </synth-brain>
    <footer></footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/tunajs/1.0.4/tuna-min.js"></script>
    <script type="importmap">
      {
        "imports": {
          "databender": "/node_modules/databender/index.js",
          "helpers/": "./helpers/"
        }
      }
    </script>
    <script type="module">
      import { App } from "./App.js";

      App();
    </script>
  </body>
</html>
